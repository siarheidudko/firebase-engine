<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Firebase Engine - v1.5.25</title><meta name="description" content="Documentation for Firebase Engine - v1.5.25"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Firebase Engine - v1.5.25</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>Firebase Engine - v1.5.25</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#firebase-engine" id="firebase-engine" style="color: inherit; text-decoration: none;">
  <h1>firebase-engine</h1>
</a>
<p>Engine to Backup, Clean, Restore. Work for Firebase.Firestore, Firebase.Storage, Firebase.Auth</p>
<p><a href="https://www.npmjs.com/package/firebase-engine"><img src="https://img.shields.io/npm/v/firebase-engine.svg" alt="npm"></a>
<a href="https://www.npmjs.com/package/firebase-engine"><img src="https://img.shields.io/npm/dy/firebase-engine.svg" alt="npm"></a>
<a href="https://www.npmjs.com/package/firebase-engine"><img src="https://img.shields.io/npm/l/firebase-engine.svg" alt="NpmLicense"></a>
<img src="https://img.shields.io/github/last-commit/siarheidudko/firebase-engine.svg" alt="GitHub last commit">
<img src="https://img.shields.io/github/release/siarheidudko/firebase-engine.svg" alt="GitHub release"></p>

<a href="#install" id="install" style="color: inherit; text-decoration: none;">
  <h2>Install</h2>
</a>
<pre><code class="language-bash"><span class="hl-0">    npm </span><span class="hl-1">i</span><span class="hl-0"> </span><span class="hl-1">firebase-engine</span><span class="hl-0"> </span><span class="hl-1">-g</span>
</code></pre>

<a href="#launch-parameters" id="launch-parameters" style="color: inherit; text-decoration: none;">
  <h2>Launch parameters</h2>
</a>
<table>
<thead>
<tr>
<th>Name</th>
<th>Short name</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>operations</td>
<td>o</td>
<td>backup (b), restore (r) or clean (c). Default: backup</td>
</tr>
<tr>
<td>path</td>
<td>p</td>
<td>Path to service account JSON file</td>
</tr>
<tr>
<td>services</td>
<td>s</td>
<td>firestore (f), storage (s), auth (a), can be separated by commas. Default: all</td>
</tr>
<tr>
<td>backup</td>
<td>b</td>
<td>Path to backup or restore file. Default: ./{$PROJECT_ID + $TIMESTAMP}.backup</td>
</tr>
<tr>
<td>collections</td>
<td>coll</td>
<td>Apply to Collections (in Firestore service). Default: all, if it is not set</td>
</tr>
<tr>
<td>buckets</td>
<td>buck</td>
<td>Apply to Buckets (in Storage service). Default: all, if it is not set</td>
</tr>
<tr>
<td>--nocompress</td>
<td>-nc</td>
<td>Do not use data compression</td>
</tr>
<tr>
<td>--emulators</td>
<td>-em</td>
<td>Use firebase emulators (work for firestore)</td>
</tr>
</tbody></table>
<ul>
<li>collections - the rule also applies to all nested collections and documents</li>
</ul>

<a href="#launch-parameters-only-for-password-recovery-for-users-in-firebaseauth" id="launch-parameters-only-for-password-recovery-for-users-in-firebaseauth" style="color: inherit; text-decoration: none;">
  <h2>Launch parameters (only for password recovery for users in Firebase.Auth)</h2>
</a>
<table>
<thead>
<tr>
<th>Name</th>
<th>Short name</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>algorithm</td>
<td>alg</td>
<td>The password hashing information (algorithm, only SCRYPT). Default: SCRYPT</td>
</tr>
<tr>
<td>base64_signer_key</td>
<td>bsk</td>
<td>The password hashing information (key in base64 encoding). Default: user passwords are not restored if not set.</td>
</tr>
<tr>
<td>base64_salt_separator</td>
<td>bss</td>
<td>The password hashing information (salt separator in base64). Default: Bw==</td>
</tr>
<tr>
<td>rounds</td>
<td>rnd</td>
<td>The password hashing information (rounds). Default: 8</td>
</tr>
<tr>
<td>mem_cost</td>
<td>mc</td>
<td>The password hashing information (memory cost). Default: 14</td>
</tr>
</tbody></table>

<a href="#use" id="use" style="color: inherit; text-decoration: none;">
  <h2>Use</h2>
</a>
<p>With full names</p>
<pre><code class="language-bash"><span class="hl-0">    firebase-engine </span><span class="hl-1">operations=&quot;clean, restore&quot;</span><span class="hl-0"> </span><span class="hl-1">path=&quot;./test.json&quot;</span><span class="hl-0"> </span><span class="hl-1">services=&quot;firestore, storage&quot;</span><span class="hl-0"> </span><span class="hl-1">backup=&quot;test.backup&quot;</span>
</code></pre>
<p>With one bucket</p>
<pre><code class="language-bash"><span class="hl-0">    firebase-engine </span><span class="hl-1">operations=&quot;clean&quot;</span><span class="hl-0"> </span><span class="hl-1">path=&quot;./test.json&quot;</span><span class="hl-0"> </span><span class="hl-1">services=&quot;storage&quot;</span><span class="hl-0"> </span><span class="hl-1">buckets=&quot;test.appspott.com&quot;</span>
</code></pre>
<p>With collection &amp; subcollection</p>
<pre><code class="language-bash"><span class="hl-0">    firebase-engine </span><span class="hl-1">operations=&quot;backup&quot;</span><span class="hl-0"> </span><span class="hl-1">path=&quot;./test.json&quot;</span><span class="hl-0"> </span><span class="hl-1">services=&quot;firestore&quot;</span><span class="hl-0"> </span><span class="hl-1">collections=&quot;authors,books.pages&quot;</span>
</code></pre>
<p>With short names and use emulators</p>
<pre><code class="language-bash"><span class="hl-0">    firebase-engine </span><span class="hl-1">o=&quot;b, c&quot;</span><span class="hl-0"> </span><span class="hl-1">s=&quot;f&quot;</span><span class="hl-0"> </span><span class="hl-1">p=&quot;./test.json&quot;</span><span class="hl-0"> </span><span class="hl-1">b=&quot;test.backup&quot;</span><span class="hl-0"> </span><span class="hl-1">-em</span>
</code></pre>
<p>With password recovery for users</p>
<pre><code class="language-bash"><span class="hl-0">    firebase-engine </span><span class="hl-1">operations=&quot;restore&quot;</span><span class="hl-0"> </span><span class="hl-1">path=&quot;./test.json&quot;</span><span class="hl-0"> </span><span class="hl-1">services=&quot;firestore, auth&quot;</span><span class="hl-0"> </span><span class="hl-1">backup=&quot;test.backup&quot;</span><span class="hl-0"> </span><span class="hl-1">bsk=&quot;nMyNs6sFWp0GZ/JSW2tsNGvGZ70oiv13gxO7ub7rxPwK271P945BiZmjrdsBRbgZmzPPgwATLR6FaXq3rUspVg==&quot;</span>
</code></pre>

<a href="#copy-data-from-project-to-emulators-or-from-emulators-to-project" id="copy-data-from-project-to-emulators-or-from-emulators-to-project" style="color: inherit; text-decoration: none;">
  <h2>Copy data from project to emulators or from emulators to project</h2>
</a>
<table>
<thead>
<tr>
<th>Name</th>
<th>Short name</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>--to-emulators</td>
<td>-to</td>
<td>Copy data from project to emulators (only firestore)</td>
</tr>
<tr>
<td>--from-emulators</td>
<td>-from</td>
<td>Copy data from emulators to project (only firestore)</td>
</tr>
<tr>
<td>path</td>
<td>p</td>
<td>Path to service account JSON file</td>
</tr>
</tbody></table>
<p>With full names</p>
<pre><code class="language-bash"><span class="hl-0">    firebase-engine-emulators </span><span class="hl-1">path=&quot;./test.json&quot;</span><span class="hl-0"> </span><span class="hl-1">--to-emulators</span>
</code></pre>
<p>With short names</p>
<pre><code class="language-bash"><span class="hl-0">    firebase-engine-emulators </span><span class="hl-1">p=&quot;./test.json&quot;</span><span class="hl-0"> </span><span class="hl-1">-from</span>
</code></pre>

<a href="#open-source" id="open-source" style="color: inherit; text-decoration: none;">
  <h2>Open Source</h2>
</a>
<p><a href="https://siarheidudko.github.io/firebase-engine">See source docs</a></p>
<p><a href="https://github.com/siarheidudko/firebase-engine">See source</a></p>

<a href="#service-account-key" id="service-account-key" style="color: inherit; text-decoration: none;">
  <h2>Service Account Key</h2>
</a>
<p>Get your service account key from IAM
<a href="https://console.cloud.google.com/iam-admin/serviceaccounts">Open google IAM</a></p>
<p>Or from the FIREBASE project
<a href="https://sites.google.com/site/scriptsexamples/new-connectors-to-google-services/firebase/tutorials/authenticate-with-a-service-account">Open official firebase docs</a></p>

<a href="#warning-password-hashes-of-users" id="warning-password-hashes-of-users" style="color: inherit; text-decoration: none;">
  <h3>WARNING (Password hashes of users)</h3>
</a>
<p>Firebase API also returns the passwordSalt and passwordHash hashed by the Firebase Auth backend for password users if the user/service account used to generate the request OAuth access token has the firebaseauth.configs.getHashConfig permission. Otherwise the passwordHash and passwordSalt will not be set.
<a href="https://firebase.google.com/docs/auth/admin/manage-users#password_hashes_of_listed_users">Open official firebase docs</a></p>

<a href="#warning-restoration-of-subcollections" id="warning-restoration-of-subcollections" style="color: inherit; text-decoration: none;">
  <h3>WARNING (restoration of subcollections)</h3>
</a>
<p>I recommend using only the top collection level in the collections parameter. Because you can get shadow document by restoring a subcollection in a non-existent document.
To a full database cleanup, including shadow documents, use the command in firebase tools</p>
<pre><code class="language-bash"><span class="hl-0">    firebase </span><span class="hl-1">firestore:delete</span><span class="hl-0"> </span><span class="hl-1">-r</span>
</code></pre>

<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h2>LICENSE</h2>
</a>
<p>Apache-2.0</p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">Firebase <wbr/>Engine -<wbr/> v1.5.25</a>
<ul>
<li class="tsd-kind-module"><a href="modules/FirebaseEngine.html">Firebase<wbr/>Engine</a></li>
<li class="tsd-kind-module"><a href="modules/bin_firebase_engine.html">bin/firebase-<wbr/>engine</a></li>
<li class="tsd-kind-module"><a href="modules/bin_firebase_engine_emulators.html">bin/firebase-<wbr/>engine-<wbr/>emulators</a></li>
<li class="tsd-kind-module"><a href="modules/index.html">index</a></li>
<li class="tsd-kind-module"><a href="modules/jobs_Jobs.html">jobs/<wbr/>Jobs</a></li>
<li class="tsd-kind-module"><a href="modules/jobs_backup_auth.html">jobs/backup/auth</a></li>
<li class="tsd-kind-module"><a href="modules/jobs_backup_firestore.html">jobs/backup/firestore</a></li>
<li class="tsd-kind-module"><a href="modules/jobs_backup_storage.html">jobs/backup/storage</a></li>
<li class="tsd-kind-module"><a href="modules/jobs_clean_auth.html">jobs/clean/auth</a></li>
<li class="tsd-kind-module"><a href="modules/jobs_clean_firestore.html">jobs/clean/firestore</a></li>
<li class="tsd-kind-module"><a href="modules/jobs_clean_storage.html">jobs/clean/storage</a></li>
<li class="tsd-kind-module"><a href="modules/jobs_restore_auth.html">jobs/restore/auth</a></li>
<li class="tsd-kind-module"><a href="modules/jobs_restore_firestore.html">jobs/restore/firestore</a></li>
<li class="tsd-kind-module"><a href="modules/jobs_restore_storage.html">jobs/restore/storage</a></li>
<li class="tsd-kind-module"><a href="modules/utils_AuthConverter.html">utils/<wbr/>Auth<wbr/>Converter</a></li>
<li class="tsd-kind-module"><a href="modules/utils_FirebaseAdmin.html">utils/<wbr/>Firebase<wbr/>Admin</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module tsd-is-external"><a href="modules/utils_FirebaseAdmin.credential.html">credential</a></li></ul></li>
<li class="tsd-kind-module"><a href="modules/utils_FirebaseAuth.html">utils/<wbr/>Firebase<wbr/>Auth</a></li>
<li class="tsd-kind-module"><a href="modules/utils_FirebaseFirestore.html">utils/<wbr/>Firebase<wbr/>Firestore</a></li>
<li class="tsd-kind-module"><a href="modules/utils_FirebaseStorage.html">utils/<wbr/>Firebase<wbr/>Storage</a></li>
<li class="tsd-kind-module"><a href="modules/utils_FirestoreConverter.html">utils/<wbr/>Firestore<wbr/>Converter</a></li>
<li class="tsd-kind-module"><a href="modules/utils_Logger.html">utils/<wbr/>Logger</a></li>
<li class="tsd-kind-module"><a href="modules/utils_StorageConverter.html">utils/<wbr/>Storage<wbr/>Converter</a></li>
<li class="tsd-kind-module"><a href="modules/utils_initialization.html">utils/initialization</a></li>
<li class="tsd-kind-module"><a href="modules/utils_randomStr.html">utils/random<wbr/>Str</a></li>
<li class="tsd-kind-module"><a href="modules/utils_template.html">utils/template</a></li></ul></li></ul></div></details></nav></div></div>
<div class="overlay"></div><script src="assets/main.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=234199319"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '234199319');</script></body></html>